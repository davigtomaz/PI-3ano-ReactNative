{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useInputFormat, useInputFormatter, useRangeChecker } from \"./dateUtils\";\nimport * as React from 'react';\nimport { getTranslation } from \"../translations/utils\";\nexport default function useDateInput(_ref) {\n  var locale = _ref.locale,\n    value = _ref.value,\n    validRange = _ref.validRange,\n    inputMode = _ref.inputMode,\n    onChange = _ref.onChange,\n    onValidationError = _ref.onValidationError;\n  var _useRangeChecker = useRangeChecker(validRange),\n    isDisabled = _useRangeChecker.isDisabled,\n    isWithinValidRange = _useRangeChecker.isWithinValidRange,\n    validStart = _useRangeChecker.validStart,\n    validEnd = _useRangeChecker.validEnd;\n  var _React$useState = React.useState(null),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    error = _React$useState2[0],\n    setError = _React$useState2[1];\n  var formatter = useInputFormatter({\n    locale: locale\n  });\n  var inputFormat = useInputFormat({\n    formatter: formatter,\n    locale: locale\n  });\n  var formattedValue = value ? formatter.format(value) : '';\n  var onChangeText = function onChangeText(date) {\n    var dayIndex = inputFormat.indexOf('DD');\n    var monthIndex = inputFormat.indexOf('MM');\n    var yearIndex = locale === 'pt' ? inputFormat.indexOf('AAAA') : inputFormat.indexOf('YYYY');\n    var day = Number(date.slice(dayIndex, dayIndex + 2));\n    var year = Number(date.slice(yearIndex, yearIndex + 4));\n    var month = Number(date.slice(monthIndex, monthIndex + 2));\n    if (Number.isNaN(day) || Number.isNaN(year) || Number.isNaN(month)) {\n      var inputError = getTranslation(locale, 'notAccordingToDateFormat', function () {\n        return 'notAccordingToDateFormat';\n      })(inputFormat);\n      setError(inputError);\n      onValidationError && onValidationError(inputError);\n      return;\n    }\n    var finalDate = inputMode === 'end' ? new Date(year, month - 1, day, 23, 59, 59) : new Date(year, month - 1, day);\n    if (isDisabled(finalDate)) {\n      var _inputError = getTranslation(locale, 'dateIsDisabled');\n      setError(_inputError);\n      onValidationError && onValidationError(_inputError);\n      return;\n    }\n    if (!isWithinValidRange(finalDate)) {\n      var errors = validStart && validEnd ? [\"\" + getTranslation(locale, 'mustBeBetween', function () {\n        return 'mustBeBetween';\n      })(formatter.format(validStart), formatter.format(validEnd))] : [validStart ? getTranslation(locale, 'mustBeHigherThan', function () {\n        return 'mustBeHigherThan';\n      })(formatter.format(validStart)) : '', validEnd ? getTranslation(locale, 'mustBeLowerThan', function () {\n        return 'mustBeLowerThan';\n      })(formatter.format(validEnd)) : ''];\n      var _inputError2 = errors.filter(function (n) {\n        return n;\n      }).join(' ');\n      setError(errors.filter(function (n) {\n        return n;\n      }).join(' '));\n      onValidationError && onValidationError(_inputError2);\n      return;\n    }\n    setError(null);\n    onValidationError && onValidationError(null);\n    if (inputMode === 'end') {\n      onChange(finalDate);\n    } else {\n      onChange(finalDate);\n    }\n  };\n  return {\n    onChange: onChange,\n    error: error,\n    formattedValue: formattedValue,\n    onChangeText: onChangeText,\n    inputFormat: inputFormat\n  };\n}","map":{"version":3,"names":["useInputFormat","useInputFormatter","useRangeChecker","React","getTranslation","useDateInput","_ref","locale","value","validRange","inputMode","onChange","onValidationError","_useRangeChecker","isDisabled","isWithinValidRange","validStart","validEnd","_React$useState","useState","_React$useState2","_slicedToArray","error","setError","formatter","inputFormat","formattedValue","format","onChangeText","date","dayIndex","indexOf","monthIndex","yearIndex","day","Number","slice","year","month","isNaN","inputError","finalDate","Date","errors","filter","n","join"],"sources":["/home/davigtomaz/PI-3ano-ReactNative/node_modules/react-native-paper-dates/src/Date/inputUtils.ts"],"sourcesContent":["import { useInputFormat, useInputFormatter, useRangeChecker } from './dateUtils'\nimport * as React from 'react'\nimport type { ValidRangeType } from './Calendar'\nimport { getTranslation } from '../translations/utils'\n\nexport default function useDateInput({\n  locale,\n  value,\n  validRange,\n  inputMode,\n  onChange,\n  onValidationError,\n}: {\n  onChange: (d: Date) => void\n  locale: undefined | string\n  value: Date | undefined\n  validRange: ValidRangeType | undefined\n  inputMode: 'start' | 'end'\n  onValidationError?: ((error: string | null) => void) | undefined\n}) {\n  const { isDisabled, isWithinValidRange, validStart, validEnd } =\n    useRangeChecker(validRange)\n  const [error, setError] = React.useState<null | string>(null)\n  const formatter = useInputFormatter({ locale })\n  const inputFormat = useInputFormat({ formatter, locale })\n  const formattedValue = value ? formatter.format(value) : ''\n  const onChangeText = (date: string) => {\n    const dayIndex = inputFormat.indexOf('DD')\n    const monthIndex = inputFormat.indexOf('MM')\n    const yearIndex =\n      locale === 'pt'\n        ? inputFormat.indexOf('AAAA')\n        : inputFormat.indexOf('YYYY')\n\n    const day = Number(date.slice(dayIndex, dayIndex + 2))\n    const year = Number(date.slice(yearIndex, yearIndex + 4))\n    const month = Number(date.slice(monthIndex, monthIndex + 2))\n\n    if (Number.isNaN(day) || Number.isNaN(year) || Number.isNaN(month)) {\n      const inputError = getTranslation(\n        locale,\n        'notAccordingToDateFormat',\n        () => 'notAccordingToDateFormat'\n      )(inputFormat)\n      setError(inputError)\n      onValidationError && onValidationError(inputError)\n      return\n    }\n\n    const finalDate =\n      inputMode === 'end'\n        ? new Date(year, month - 1, day, 23, 59, 59)\n        : new Date(year, month - 1, day)\n\n    if (isDisabled(finalDate)) {\n      const inputError = getTranslation(locale, 'dateIsDisabled')\n      setError(inputError)\n      onValidationError && onValidationError(inputError)\n      return\n    }\n    if (!isWithinValidRange(finalDate)) {\n      let errors =\n        validStart && validEnd\n          ? [\n              `${getTranslation(\n                locale,\n                'mustBeBetween',\n                () => 'mustBeBetween'\n              )(formatter.format(validStart), formatter.format(validEnd))}`,\n            ]\n          : [\n              validStart\n                ? getTranslation(\n                    locale,\n                    'mustBeHigherThan',\n                    () => 'mustBeHigherThan'\n                  )(formatter.format(validStart))\n                : '',\n              validEnd\n                ? getTranslation(\n                    locale,\n                    'mustBeLowerThan',\n                    () => 'mustBeLowerThan'\n                  )(formatter.format(validEnd))\n                : '',\n            ]\n      const inputError = errors.filter((n) => n).join(' ')\n      setError(errors.filter((n) => n).join(' '))\n      onValidationError && onValidationError(inputError)\n      return\n    }\n\n    setError(null)\n    onValidationError && onValidationError(null)\n    if (inputMode === 'end') {\n      onChange(finalDate)\n    } else {\n      onChange(finalDate)\n    }\n  }\n  return {\n    onChange,\n    error,\n    formattedValue,\n    onChangeText,\n    inputFormat,\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}